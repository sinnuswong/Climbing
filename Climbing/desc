下面是一份可直接交给 Codex / 工程同事执行的「MVP 设计方案」。
这是产品 + 技术设计说明，不包含代码，但结构化到“照写即可实现”的粒度。

3D 方块登顶益智游戏 — iOS 原生 MVP 设计方案

技术栈：iOS 原生 + RealityKit + SwiftUI

一、MVP 目标与边界
1.1 核心目标

在 iOS 上实现一款 3D 方块堆叠益智游戏，玩家控制一个小人，通过合法移动规则，从起点找到一条路径并登上地图的最高点。

1.2 MVP 边界（明确不做）

不做多人 / 排行榜

不做物理破坏、可推动方块

不做关卡编辑器（关卡内置）

不做广告 / 内购

不做 tvOS / visionOS 原生适配（仅保证 AirPlay 可玩）

二、核心玩法设计
2.1 世界模型（逻辑层）

地图是一个 二维网格

每个格子有一个整数高度 h(x, y)

高度表示该位置堆叠了多少层立方体方块

2.2 玩家状态

玩家始终站在某个格子的顶面

玩家状态用 (x, y) 表示，其站立高度为 h(x,y)

2.3 移动规则（严格）

玩家每次只能向上下左右四个方向移动：

目标格高度 > 0

爬升限制：
h(target) - h(current) ≤ 1

下降：允许任意下降（MVP 不限制）

2.4 胜利条件

玩家到达任意一个 最高高度格子

h(x,y) == max(h) 即视为通关

三、自动寻路与提示逻辑（MVP 必须）
3.1 寻路目标

从起点 (sx, sy) 出发

找到一条符合移动规则的路径

终点是 任意最高点格子

3.2 算法要求

使用 BFS 或 A*（均可）

每个格子是一个节点

合法移动是边

3.3 寻路结果

返回一条 格子序列路径

若不存在路径，返回“无解”

四、3D 视觉与场景设计（RealityKit）
4.1 场景类型

使用 ARView，不开 AR 模式

纯 3D 世界，固定参考系

4.2 方块渲染规则

每个 (x,y) 位置，根据高度生成堆叠立方体

方块尺寸统一

方块材质：纯色或轻度渐变（避免复杂贴图）

方块为静态环境（不频繁更新）

MVP 优先保证清晰、稳定，不追求复杂光影

4.3 小人角色

使用简单几何体或低模角色

只支持平移与上下台阶动画

不做骨骼动画（移动即位移）

五、UI 与交互设计（重点）
5.1 UI 架构

3D 场景：RealityKit

2D HUD：SwiftUI Overlay

二者严格分层，互不干扰。

5.2 HUD 设计（MVP 必须）
固定按钮（右下角）

Auto：自动按路径走到最高点

Hint：显示到最高点的路径

Reset View：相机回到默认角度

信息显示（左上角）

当前高度

步数

关卡编号

5.3 交互方式
选格移动

玩家 点击目标格子

若是相邻且合法 → 走一步

若不相邻 → 不响应（MVP 简化）

路径显示（Hint）

在每个路径格子的顶面显示高亮标记

路径高亮可常驻或 3 秒后消失

六、相机系统设计（关键体验）
6.1 默认视角

斜 45° 俯视

固定初始距离

目标始终在画面中下方

6.2 手势设计

单指拖动：绕地图中心旋转相机

双指捏合：缩放相机距离

按钮 Reset View：回正

相机不允许翻转到地面以下

七、关卡系统（MVP 级）
7.1 关卡格式

JSON 文件内置在 App Bundle

包含：

地图尺寸

起点坐标

高度矩阵

7.2 关卡数量

MVP：10–20 关

手工设计，确保可达性

八、性能与实现约束
8.1 性能目标

iPhone 12 及以上：60 FPS

iPhone XR 级别：可接受 30–60 FPS

8.2 实现约束

方块尽量合批（静态 Mesh）

避免每帧创建 / 销毁 Entity

小人和高亮是少量动态对象

九、发布与运行场景
9.1 iOS 上架

单一 iOS App

不依赖外部 SDK

9.2 电视游玩

支持 AirPlay 投屏

操作仍在手机端完成

9.3 Vision Pro（非 MVP）

逻辑结构需保留可迁移性

不在 MVP 实现范围内

十、MVP 完成标准（验收点）

能加载关卡并正确生成 3D 地图

玩家可点击移动，规则正确

Hint 能显示一条合法路径

Auto 能自动走到最高点

相机操作稳定不迷路

HUD 清晰、无遮挡

十一、后续扩展方向（不进入 MVP）

可推动方块 / 梯子

关卡编辑器

Vision Pro 空间化

皮肤与角色 IP

时间/步数评分系统

总结一句话

这是一个以“清晰规则 + 稳定交互 + 可自动求解”为核心的 3D 益智 MVP，原生 iOS + RealityKit 完全胜任，且为未来 Vision Pro 保留空间。

如果你愿意，我可以下一步帮你把这份方案压缩成 Codex Prompt 版（一段工程指令式描述），或者拆成「模块级 Prompt」（场景 / UI / 寻路 / 相机）。


下面是 LevelGeneratorPreviewView 里可调参数的含义（对应生成逻辑）：

Width / Depth：地图尺寸（格子数）。越大越复杂，路径更长。
Max Height：最高高度上限（目标高度）。越高就需要更多“上升台阶”才能到顶。
Levels：一次生成的关卡数量（用于导出 JSON 多关）。
Holes：空洞比例（0～0.6）。越高，空格越多，断路风险更大。
Path Length：最短路径长度比例（0.3～0.85）。越高，保证路径越长、更绕。
Avoid Edge：避开边缘的倾向（0～0.85）。越高，路径更偏向内圈，不走边缘。
Turn Bias：转弯倾向（0～0.85）。越高，路径更“之”字形，直走概率更低。
Seed：随机种子。相同参数 + 种子会生成相同关卡，方便复现。
如果你需要我给一组“高难度”推荐参数，我可以直接给你一个预设。